cmake_minimum_required(VERSION 3.10)

file(TO_CMAKE_PATH "$ENV{PATH}" TEST_PATH)
file(TO_NATIVE_PATH "${CMAKE_INSTALL_PREFIX}/lib;${TEST_PATH}" TEST_PATH)
message("${TEST_PATH}")
foreach(TEST basic highlevel main)
	add_test(NAME ${TEST}
		WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
		COMMAND ${PYTHON_EXECUTABLE} ${TEST}.py)
	set_tests_properties(${TEST} PROPERTIES ENVIRONMENT LD_LIBRARY_PATH=${CMAKE_CURRENT_SOURCE_DIR})
	set_tests_properties(${TEST} PROPERTIES ENVIRONMENT "PATH=${TEST_PATH}")
endforeach()
