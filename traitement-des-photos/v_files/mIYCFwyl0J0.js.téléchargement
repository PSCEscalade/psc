if (self.CavalryLogger) { CavalryLogger.start_js(["HM3jm"]); }

__d("EventGuestProfileShape",["EventReminderConstants","React"],(function(a,b,c,d,e,f){a=b("EventReminderConstants").EventGuestStates;c=b("EventReminderConstants").GuestStates;d=b("React").PropTypes;f={fbid:d.string,imageSrc:d.oneOfType([d.string,d.object]),guestState:d.oneOf([a.INITIAL,a.GOING,a.WATCHED,a.UNWATCHED,c.GOING,c.DECLINED,c.INVITED]).isRequired};e.exports=f}),null);
__d("EventGuestProfilePicWithBadge.react",["ix","cx","EventGuestProfileShape","EventReminderConstants","Image.react","React","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("EventReminderConstants").EventGuestStates,k=b("EventReminderConstants").GuestStates;c=b("React").PropTypes;var l=2,m=g("114568"),n=g("114707"),o=g("115598");i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.badgeSize,d=a.imageSize;a=a.profile;var e=b("React").createElement(b("Image.react"),{className:"_3vnr",height:d,width:d,src:a.imageSrc});d={marginLeft:-c+"px",marginTop:d+2*l-c+"px"};c=null;a.guestState===k.GOING?c=b("React").createElement(b("Image.react"),{className:"_3vns",style:d,src:m}):a.guestState===k.DECLINED?c=b("React").createElement(b("Image.react"),{className:"_3vnt",style:d,src:n}):a.guestState===j.GOING?c=b("React").createElement(b("Image.react"),{className:"_62kp",style:d,src:m}):a.guestState===j.WATCHED&&(c=b("React").createElement(b("Image.react"),{className:"_62kq",style:d,src:o}));return b("React").createElement("div",{className:this.props.className},e,c)};function a(){i.apply(this,arguments)}a.defaultProps={badgeSize:16,imageSize:32};a.propTypes={badgeSize:c.number,className:c.string,eventType:c.string,imageSize:c.number,profile:c.shape(b("EventGuestProfileShape")).isRequired};e.exports=a}),null);
__d("EventRSVPFacepile.react",["cx","EventGuestProfilePicWithBadge.react","EventGuestProfileShape","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.profiles.map(function(a,c){return b("React").createElement(b("EventGuestProfilePicWithBadge.react"),{badgeSize:this.props.badgeSize,className:"_4sju",eventType:this.props.eventType,imageSize:this.props.faceSize,key:c+a.fbid,profile:a})}.bind(this));return b("React").createElement("div",{className:b("joinClasses")("_4sjv",this.props.className)},a)};function a(){h.apply(this,arguments)}a.defaultProps={badgeSize:16,faceSize:32};a.propTypes={badgeSize:c.number,className:c.string,eventType:c.string,faceSize:c.number,profiles:c.arrayOf(c.shape(b("EventGuestProfileShape"))).isRequired};e.exports=a}),null);
__d("EventResponseButtons.react",["cx","fbt","EventReminderConstants","React","XUIButton.react","XUISingleSelector.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUISingleSelector.react").Option,k=b("EventReminderConstants").EventGuestStates,l=b("EventReminderConstants").EventPlanType,m=b("EventReminderConstants").GuestStates;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={showSpinner:!1,prevGuestState:""},this.$6=function(){this.setState({showSpinner:!0,prevGuestState:this.props.guestState}),this.props.onResponseClick(m.DECLINED)}.bind(this),this.$7=function(){this.setState({showSpinner:!0,prevGuestState:this.props.guestState}),this.props.onResponseClick(m.GOING)}.bind(this),this.$9=function(a){this.setState({showSpinner:!0,prevGuestState:this.props.guestState}),this.props.onResponseClick(a.value)}.bind(this),b}a.prototype.render=function(){if(this.state.showSpinner)return this.$1();else if(this.props.eventType===l.ASSOCIATED_EVENT)return this.props.guestState===k.INITIAL?this.$2():this.$3();else return this.props.guestState===m.INVITED?this.$4():this.$5()};a.prototype.$1=function(){var a=this.state.prevGuestState===k.INITIAL||this.state.prevGuestState===m.INVITED?"_164q":"_164s";return b("React").createElement(b("XUISpinner.react"),{className:a,size:"small"})};a.prototype.$4=function(){return b("React").createElement("div",{className:"_26lz"},b("React").createElement(b("XUIButton.react"),{className:"_26l-",label:h._("Ne participe pas"),onClick:this.$6,size:this.props.size}),b("React").createElement(b("XUIButton.react"),{className:"_26l_",label:h._("Participe"),onClick:this.$7,size:this.props.size}))};a.prototype.$2=function(){return b("React").createElement("div",{className:"_26lz"},b("React").createElement(b("XUIButton.react"),{className:"_2w2a",label:h._("Participe"),onClick:function(){return this.$8(k.GOING)}.bind(this),size:this.props.size}),b("React").createElement(b("XUIButton.react"),{className:"_2w2a",label:h._("Int\u00e9ress\u00e9(e)"),onClick:function(){return this.$8(k.WATCHED)}.bind(this),size:this.props.size}),b("React").createElement(b("XUIButton.react"),{className:"_2w2a",label:h._("Ne participe pas"),onClick:function(){return this.$8(k.UNWATCHED)}.bind(this),size:this.props.size}))};a.prototype.$8=function(a){this.setState({showSpinner:!0,prevGuestState:this.props.guestState}),this.props.onResponseClick(a)};a.prototype.$5=function(){return b("React").createElement(b("XUISingleSelector.react"),{onChange:this.$9,value:this.props.guestState,size:this.props.size},b("React").createElement(j,{value:m.GOING,label:h._("Participe")}),b("React").createElement(j,{value:m.DECLINED,label:h._("Ne participe pas")}))};a.prototype.$3=function(){return b("React").createElement(b("XUISingleSelector.react"),{onChange:this.$9,value:this.props.guestState,size:this.props.size},b("React").createElement(j,{value:k.GOING,label:h._("Participe")}),b("React").createElement(j,{value:k.WATCHED,label:h._("Int\u00e9ress\u00e9(e)")}),b("React").createElement(j,{value:k.UNWATCHED,label:h._("Ne participe pas")}))};e.exports=a}),null);
__d("EventPlanStrings",["fbt","formatDate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=" \xb7 ";a={getStartPlanFBT:function(){return g._("Commencer un projet")},getLoadingPlanFBT:function(){return g._("Chargement...")},getDisplayDateAndTimeFBT:function(a,c){var d=b("formatDate")(a,"g:iA"),e=d.length-5;d.substring(e,e+3)===":00"&&(d=d.substring(0,e).concat(d.substring(e+3)));e=g._("{reminder_date}, \u00e0 {reminder_time}",[g._param("reminder_date",b("formatDate")(a,"D M j")),g._param("reminder_time",d)]);if(c)return g._("{reminder_date_and_time}{middot_separator_for_time_and_name}{reminder_name}",[g._param("reminder_date_and_time",e),g._param("middot_separator_for_time_and_name",h),g._param("reminder_name",c)]);else return e},getSubtitle:function(a,b,c){a=g._({"*":"{number} participeront","_1":"1 participant"},[g._plural(a,"number")]);void 0;b?c?c=g._("{reminder_location_name}{middot_separator_for_location_and_going_members}{going_member_count}",[g._param("reminder_location_name",b),g._param("middot_separator_for_location_and_going_members",h),g._param("going_member_count",a)]):c=b:c=a;return c},getViewEventFBT:function(){return g._("Voir l\u2019\u00e9v\u00e8nement")},getRSVPContext:function(a){return g._({"*":"{number} participeront","_1":"1 participant"},[g._plural(a,"number")])},getAssociatedEventRSVPContext:function(a,b){return g._("{going_member_count} participent {middot_separator_for_going_and_interested_members}{interested_member_count} sont int\u00e9ress\u00e9s",[g._param("going_member_count",a),g._param("middot_separator_for_going_and_interested_members",h),g._param("interested_member_count",b)])},getAssociatedEventRSVPContextAsSubtitle:function(a,b){return g._("\u00c9v\u00e8nement public {middot_separator_for_event_name_and_going_members}{going_member_count} Participe {middot_separator_for_going_and_interested_members}{interested_member_count} Int\u00e9ress\u00e9(e)",[g._param("middot_separator_for_event_name_and_going_members",h),g._param("going_member_count",a),g._param("middot_separator_for_going_and_interested_members",h),g._param("interested_member_count",b)])}};e.exports=a}),null);
__d("EventReminderActionsLogger",["EventsActionsLogger"],(function(a,b,c,d,e,f){e.exports={logTriggerOnTriggerCTA:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.TRIGGER,target:b("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnChatTabSheet:function(a){b("EventsActionsLogger").log(a,{type:b("EventsActionsLogger").Type.VIEW,target:b("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logViewOnTriggerWord:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.VIEW,target:b("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnTriggerCTA:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.VIEW,target:b("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnChatTabSheet:function(a){b("EventsActionsLogger").log(a,{type:b("EventsActionsLogger").Type.CLICK,target:b("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logClickOnEntryPoint:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.CLICK,target:b("EventsActionsLogger").Target.REMINDER_ENTRYPOINT,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.MESSENGER_COMPOSER}]}})},logClickOnTriggerWord:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.CLICK,target:b("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnTriggerCTA:function(){b("EventsActionsLogger").log(null,{type:b("EventsActionsLogger").Type.CLICK,target:b("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})}}}),null);
__d("ChatEventReminderFlyout.react",["cx","fbt","DateConsts","EventGuestProfileShape","EventPlanStrings","EventReminderConstants","EventReminderStateStore","EventRemindersGating","EventResponseButtons.react","EventRSVPFacepile.react","LayerHideOnBlur","ContextualLayerHideOnScroll","LightweightEventDateTimePicker.react","LightweightEventLocationRow.react","LightweightEventType","Link.react","MercuryIDs","React","ScrollableArea.react","XUIButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUISpinner.react","XUITextInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=b("EventReminderConstants").EventGuestStates;var j=b("EventReminderConstants").EventPlanType;f=b("EventReminderConstants").GuestStates;var k=266,l="https://www.facebook.com/events/",m=122;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.focusInput=function(){this.refs.event_title&&this.refs.event_title.focusInput()};a.prototype.componentDidMount=function(){this.focusInput()};a.prototype.render=function(){return b("React").createElement(b("XUIContextualDialog.react"),babelHelpers["extends"]({width:k,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnScroll:b("ContextualLayerHideOnScroll")},hideOnEscape:!0},this.props.dialogProps),b("React").createElement("div",{className:"_2l1g"},b("React").createElement(b("XUIContextualDialogTitle.react"),{className:"_2l1h"},b("React").createElement("span",{className:"_2l1i"},this.$1())),b("React").createElement(b("XUIContextualDialogBody.react"),{className:"_2l1j"},this.$2(),this.$3(),this.$4(),this.$5()),b("React").createElement(b("XUIContextualDialogFooter.react"),null,this.$6(),b("React").createElement(b("XUIButton.react"),{label:this.$7(),use:"confirm",onClick:this.props.onCreateOrChangeEvent}))))};a.prototype.$2=function(){return this.props.eventType===j.ASSOCIATED_EVENT?b("React").createElement("div",{className:"_2l1l"},b("React").createElement("div",{className:"_2pi8 _2pi2"},b("EventPlanStrings").getDisplayDateAndTimeFBT(this.props.eventDate/b("DateConsts").MS_PER_SEC))):b("React").createElement("div",{className:"_2l1l"},b("React").createElement(b("LightweightEventDateTimePicker.react"),{initialDateTime:this.props.eventDate,onDateTimeChange:this.props.onDateTimeChange}))};a.prototype.$3=function(){if(this.props.eventType===j.ASSOCIATED_EVENT){var a=l+this.props.eventID;return b("React").createElement("div",{className:"_2l1l"},b("React").createElement("div",{className:"_2pi8"},this.props.eventName),b("React").createElement(b("Link.react"),{className:"_2pi8",href:a},b("EventPlanStrings").getViewEventFBT()))}return b("React").createElement("div",{className:"_2l1l"},b("React").createElement(b("XUITextInput.react"),{className:"autofocus _2l1n","aria-label":h._("Nom de l\u2019\u00e9v\u00e8nement"),placeholder:h._("Nom"),ref:"event_title",value:this.props.eventName,onChange:this.props.onNameChange}))};a.prototype.$4=function(){return this.props.eventType===b("LightweightEventType").CALL||this.props.eventType===b("LightweightEventType").DIRECT_M||this.props.eventType===j.ASSOCIATED_EVENT&&this.props.eventLocationName===null?null:b("React").createElement("div",{className:"_2l1l"},b("React").createElement(b("LightweightEventLocationRow.react"),{disabled:this.props.eventType===j.ASSOCIATED_EVENT,initialLocationName:this.props.eventLocationName,initialLocationAddress:this.props.eventLocationAddress,onLocationChange:this.props.onLocationChange,onLocationSelect:this.props.onLocationSelect}))};a.prototype.$5=function(){if(this.props.eventType===b("LightweightEventType").DIRECT_M||this.props.eventType===b("LightweightEventType").CALL)return null;var a=this.props.eventMembers;if(!this.props.isEditing||!a||!this.$8())return null;return!b("EventReminderStateStore").getProfileImagesLoaded(this.props.threadID)?b("React").createElement("div",{className:"_nbm"},b("React").createElement("div",{className:"_2ph-"},b("React").createElement(b("XUISpinner.react"),{size:"large"}))):b("React").createElement("div",{className:"_2l1l"},b("React").createElement("div",{className:"_pyv"},this.props.eventType===j.ASSOCIATED_EVENT?b("EventPlanStrings").getAssociatedEventRSVPContext(this.props.numOfGoingMembers,this.props.numOfInterestedMembers):b("EventPlanStrings").getRSVPContext(this.props.numOfGoingMembers)),b("React").createElement(b("ScrollableArea.react"),{className:"_pyw",maxHeight:m},b("React").createElement(b("EventRSVPFacepile.react"),{eventType:this.props.eventType,profiles:a})),b("React").createElement("div",{className:"_2m6x"},b("React").createElement(b("EventResponseButtons.react"),{eventType:this.props.eventType,guestState:this.props.selfGuestState,onResponseClick:this.props.onSelfGuestStateChange,size:"medium"})))};a.prototype.$6=function(){if(!this.props.isEditing||this.props.eventType===j.ASSOCIATED_EVENT)return null;var a=this.$9()?h._("Supprimer le plan"):h._("Supprimer");return b("React").createElement(b("Link.react"),{className:"_2l1p",onClick:this.props.onDeleteEvent},a)};a.prototype.$1=function(){if(this.props.eventType===b("LightweightEventType").CALL)return h._("M\u00e9mo d\u2019appel");else if(this.props.eventType===j.ASSOCIATED_EVENT)return h._("D\u00e9tails de l\u2019\u00e9v\u00e8nement");return this.$9()?h._("Projet"):h._("Rappel d\u2019\u00e9v\u00e8nement")};a.prototype.$7=function(){if(this.props.isEditing)return this.$9()?h._("Termin\u00e9"):h._("D\u00e9finir");else return this.$9()?h._("Cr\u00e9er un programme"):h._("Cr\u00e9er")};a.prototype.$8=function(){return b("EventRemindersGating").isRSVPAllowed};a.prototype.$9=function(){return b("EventRemindersGating").shouldUseNewName};function a(){i.apply(this,arguments)}a.propTypes={isEditing:c.bool.isRequired,eventID:c.string.isRequired,eventType:c.oneOf([j.ASSOCIATED_EVENT,b("LightweightEventType").CALL,b("LightweightEventType").DIRECT_M,b("LightweightEventType").EVENT,b("LightweightEventType").M_REMINDER]),eventDate:c.number.isRequired,eventName:c.string,eventLocationName:c.string,eventLocationAddress:c.string,eventMembers:c.arrayOf(c.shape(b("EventGuestProfileShape")).isRequired),numOfGoingMembers:c.number,numOfInterestedMembers:c.number,selfGuestState:c.oneOf([d.INITIAL,d.GOING,d.WATCHED,d.UNWATCHED,f.GOING,f.DECLINED,f.INVITED]),onCreateOrChangeEvent:c.func.isRequired,onDeleteEvent:c.func.isRequired,onDateTimeChange:c.func.isRequired,onNameChange:c.func.isRequired,onLocationChange:c.func.isRequired,onLocationSelect:c.func.isRequired,onSelfGuestStateChange:c.func.isRequired,dialogProps:c.object,threadID:c.string};e.exports=a}),null);
__d("ChatEventReminderTabSheet.react",["ix","cx","fbt","ChatEventReminderFlyout.react","EventGuestProfileShape","EventPlanStrings","EventReminderActionsLogger","EventReminderConstants","EventRemindersGating","Image.react","LightweightEventType","React","ReactDOM","XUIButton.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("EventReminderConstants").EventGuestStates,l=b("EventReminderConstants").EventPlanType,m=b("EventReminderConstants").GuestStates;c=b("React").PropTypes;var n=266;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.componentDidMount=function(){b("EventReminderActionsLogger").logViewOnChatTabSheet(this.props.eventID)};a.prototype.render=function(){return b("React").createElement("div",{onClick:this.props.handleClick,ref:"banner",role:"button",tabIndex:"0"},b("React").createElement("div",{tabIndex:0,className:"_4cu7"},b("React").createElement("div",null,b("React").createElement("span",{className:"_4r4s"},this.$1()),this.props.eventType===l.ASSOCIATED_EVENT?null:b("React").createElement(b("Image.react"),{className:"_4cu8",src:g("113739")})),this.$2(),this.$3()),this.$4())};a.prototype.$4=function(){if(!this.props.flyoutShown)return null;var a="left",c=b("ReactDOM").findDOMNode(this.refs.banner);c&&c instanceof Element&&c.getBoundingClientRect().left<n&&(a="right");c={alignment:"left",position:a,contextRef:function(){return this.refs.banner}.bind(this),onToggle:this.props.onToggle,shown:this.props.flyoutShown};return b("React").createElement(b("ChatEventReminderFlyout.react"),{isEditing:!0,eventID:this.props.eventID,eventType:this.props.eventType,eventDate:this.props.flyoutEventDate,eventName:this.props.flyoutEventName,eventLocationName:this.props.flyoutEventLocationName,eventLocationAddress:this.props.flyoutEventLocationAddress,eventMembers:this.props.eventMembers,numOfGoingMembers:this.props.numOfGoingMembers,numOfInterestedMembers:this.props.numOfInterestedMembers,selfGuestState:this.props.selfGuestState,onDateTimeChange:this.props.onDateTimeChange,onNameChange:this.props.onNameChange,onLocationChange:this.props.onLocationChange,onLocationSelect:this.props.onLocationSelect,onSelfGuestStateChange:this.props.onSelfGuestStateChange,onCreateOrChangeEvent:this.props.onCreateOrChangeEvent,onDeleteEvent:this.props.onDeleteEvent,dialogProps:c,threadID:this.props.threadID})};a.prototype.$1=function(){if(!this.props.isEventLoaded)return b("EventPlanStrings").getLoadingPlanFBT();else return b("EventPlanStrings").getDisplayDateAndTimeFBT(this.props.eventDate,this.props.eventName)};a.prototype.$2=function(){var a=this.$5();if(!this.props.eventLocationName&&!a)return null;if(this.props.selfGuestState===m.INVITED&&this.$5())return this.$6();if(this.props.numOfGoingMembers+this.props.numOfInterestedMembers<=0)return null;a=this.props.eventType===l.ASSOCIATED_EVENT?b("EventPlanStrings").getAssociatedEventRSVPContextAsSubtitle(this.props.numOfGoingMembers,this.props.numOfInterestedMembers):b("EventPlanStrings").getSubtitle(this.props.numOfGoingMembers,this.props.eventLocationName,a);return b("React").createElement("div",{className:"_47d1"},a)};a.prototype.$3=function(){return this.props.eventType!==l.ASSOCIATED_EVENT||this.props.selfGuestState!==k.INITIAL?null:b("React").createElement("div",{className:"_4qxr"},b("React").createElement(b("XUIButton.react"),{label:i._("Participe"),onClick:function(event){event.stopPropagation(),this.props.onSelfGuestStateChange(k.GOING)}.bind(this),size:"small"}),b("React").createElement(b("XUIButton.react"),{label:i._("Int\u00e9ress\u00e9(e)"),onClick:function(event){event.stopPropagation(),this.props.onSelfGuestStateChange(k.WATCHED)}.bind(this),size:"small"}),b("React").createElement(b("XUIButton.react"),{label:i._("Ne participe pas"),onClick:function(event){event.stopPropagation(),this.props.onSelfGuestStateChange(k.UNWATCHED)}.bind(this),size:"small"}))};a.prototype.$6=function(){return b("React").createElement("div",{className:"_4qxr"},b("React").createElement(b("XUIButton.react"),{className:"_4qxu",label:i._("Ne participe pas"),onClick:function(event){event.stopPropagation(),this.props.onSelfGuestStateChange(m.DECLINED)}.bind(this),size:"small"}),b("React").createElement(b("XUIButton.react"),{className:"_4qxv",label:i._("Participe"),onClick:function(event){event.stopPropagation(),this.props.onSelfGuestStateChange(m.GOING)}.bind(this),size:"small"}))};a.prototype.$5=function(){return this.props.allowRSVP&&b("EventRemindersGating").isRSVPAllowed};function a(){j.apply(this,arguments)}a.propTypes={eventName:c.string,eventDate:c.number.isRequired,eventLocationName:c.string,eventMembers:c.arrayOf(c.shape(b("EventGuestProfileShape")).isRequired),allowRSVP:c.bool.isRequired,numOfGoingMembers:c.number,numOfInterestedMembers:c.number,selfGuestState:c.oneOf([k.INITIAL,k.GOING,k.WATCHED,k.UNWATCHED,m.GOING,m.DECLINED,m.INVITED]),flyoutEventDate:c.number.isRequired,flyoutEventName:c.string,flyoutEventLocationName:c.string,flyoutEventLocationAddress:c.string,eventID:c.string.isRequired,eventType:c.oneOf([l.ASSOCIATED_EVENT,b("LightweightEventType").CALL,b("LightweightEventType").DIRECT_M,b("LightweightEventType").EVENT,b("LightweightEventType").M_REMINDER]),flyoutShown:c.bool.isRequired,handleClick:c.func.isRequired,onToggle:c.func.isRequired,onCreateOrChangeEvent:c.func.isRequired,onDeleteEvent:c.func.isRequired,onDateTimeChange:c.func.isRequired,onNameChange:c.func.isRequired,onLocationChange:c.func.isRequired,onLocationSelect:c.func.isRequired,onSelfGuestStateChange:c.func.isRequired,isEventLoaded:c.bool,threadID:c.string};e.exports=a}),null);
__d("XEditEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/submit/",{acontext:{type:"String",required:!0},event_reminder_id:{type:"Int",required:!0},title:{type:"String"},date:{type:"Int"},location_id:{type:"String"},location_name:{type:"String"},"delete":{type:"Bool",defaultValue:!1}})}),null);
__d("XEventRSVPController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/event/rsvp/",{acontext:{type:"String",required:!0},event_id:{type:"Int",required:!0},guest_state:{type:"String",required:!0}})}),null);
__d("XEventReminderRSVPController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/rsvp/",{acontext:{type:"String",required:!0},event_reminder_id:{type:"Int",required:!0},guest_state:{type:"Enum",required:!0,enumType:1}})}),null);
__d("ChatEventReminderContainer.react",["AsyncRequest","ChatEventReminderFlyout.react","ChatEventReminderTabSheet.react","EventPlanTimeHelper","EventReminderActions","EventReminderActionsLogger","EventReminderConstants","EventReminderRequestHelper","EventReminderStateStore","FBJSON","FluxContainer","LightweightEventType","MercuryIDs","React","SimpleXUIDialog","XCreateEventReminderController","XEditEventReminderController","XEventRSVPController","XEventReminderRSVPController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").Component;var h=b("EventReminderConstants").EventPlanType,i=b("EventReminderConstants").GuestStates,j=b("EventReminderConstants").TimeErrorType,k=1e3;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){__p&&__p();g.constructor.call(this,a),this.$9=function(a){a!==this.state.flyoutShown&&this.setState({flyoutShown:a})}.bind(this),this.$8=function(){var a=this.state.eventID;b("EventReminderActionsLogger").logClickOnChatTabSheet(a);this.state.eventType===h.ASSOCIATED_EVENT?this.$9(!this.state.flyoutShown):!this.state.flyoutShown?b("EventReminderRequestHelper").fetchEventReminder(this.props.threadID,a,function(){this.$9(!0)}.bind(this)):this.$9(!1)}.bind(this),this.$1=function(a,b){this.setState({flyoutEventDate:a,showTimeError:b})}.bind(this),this.$2=function(event){this.setState({flyoutEventName:event.target.value})}.bind(this),this.$3=function(a){this.setState({flyoutEventLocationID:"",flyoutEventLocationName:a,flyoutEventLocationAddress:""})}.bind(this),this.$4=function(a,b,c){this.setState({flyoutEventLocationID:a,flyoutEventLocationName:b,flyoutEventLocationAddress:c})}.bind(this),this.$5=function(a){__p&&__p();var c=this.state.selfGuestState;this.setState({selfGuestState:a});if(this.state.eventType===h.ASSOCIATED_EVENT){var d=b("XEventRSVPController").getURIBuilder().setInt("event_id",this.state.eventID).setString("guest_state",a).setString("acontext",b("FBJSON").stringify(this.props.actionContext));new(b("AsyncRequest"))(d.getURI()).setHandler(function(a){a.payload&&this.$9(!1),a.payload.error&&(b("SimpleXUIDialog").show(a.payload.error),this.setState({selfGuestState:c}))}.bind(this)).send();return}d=b("XEventReminderRSVPController").getURIBuilder().setInt("event_reminder_id",this.state.eventID).setEnum("guest_state",a).setString("acontext",b("FBJSON").stringify(this.props.actionContext));new(b("AsyncRequest"))(d.getURI()).setHandler(function(a){this.$9(!1)}.bind(this)).send()}.bind(this),this.$7=function(){this.$9(!1);if(this.state.showTimeError!==j.NO_ERROR||this.state.eventType===h.ASSOCIATED_EVENT)return;this.props.isEditing?this.$10():this.$11()}.bind(this),this.$6=function(){var a=this.state.eventID;a=b("XEditEventReminderController").getURIBuilder().setInt("event_reminder_id",a).setBool("delete",!0).setString("acontext",b("FBJSON").stringify(this.props.actionContext));new(b("AsyncRequest"))(a.getURI()).setHandler(function(a){a.payload&&(this.props.dialogProps&&this.props.dialogProps.onToggle&&this.props.dialogProps.onToggle(!1),b("EventReminderActions").deleteEventReminder(this.props.threadID))}.bind(this)).send()}.bind(this)}a.getStores=function(a){return[b("EventReminderStateStore")]};a.calculateState=function(a,c){var event=b("EventReminderStateStore").getEvent(c.threadID);if(!c.isEditing||!event||!event.exists)return this.getDefaultState(c);var d=b("EventReminderStateStore").getEventMembers(c.threadID),e=b("EventReminderStateStore").getNumOfGoingMembers(c.threadID),f=b("EventReminderStateStore").getNumOfInterestedMembers(c.threadID);c=b("EventReminderStateStore").getSelfGuestState(c.threadID);return{eventDate:event.eventDate,eventName:event.eventName,eventLocationName:event.eventLocationName,eventMembers:d,eventID:event.eventID,eventType:event.eventType,flyoutEventDate:a?a.flyoutEventDate:event.eventDate*k,flyoutEventName:a?a.flyoutEventName:event.eventName,flyoutEventLocationID:a?a.flyoutEventLocationID:"",flyoutEventLocationName:a?a.flyoutEventLocationName:event.eventLocationName,flyoutEventLocationAddress:a?a.flyoutEventLocationAddress:event.eventLocationAddress,flyoutShown:a?a.flyoutShown:!1,isEventLoaded:!0,showTimeError:j.NO_ERROR,allowRSVP:event.allowRSVP,numOfGoingMembers:e,numOfInterestedMembers:f,selfGuestState:c}};a.getDefaultState=function(a){a=b("EventPlanTimeHelper").getDefaultDateTime(a.defaultEventDate);return{eventDate:a/k,eventName:"",eventLocationName:"",eventMembers:[],eventID:"",eventType:b("LightweightEventType").EVENT,flyoutEventDate:a,flyoutEventName:"",flyoutEventLocationID:"",flyoutEventLocationName:"",flyoutEventLocationAddress:"",flyoutShown:!1,isEventLoaded:!1,showTimeError:j.NO_ERROR,allowRSVP:!1,numOfGoingMembers:0,numOfInterestedMembers:0,selfGuestState:i.INVITED}};a.prototype.render=function(){return this.props.flyoutNoSheet?b("React").createElement(b("ChatEventReminderFlyout.react"),{isEditing:this.props.isEditing,eventID:this.state.eventID,eventType:this.state.eventType,eventDate:this.state.flyoutEventDate,eventName:this.state.flyoutEventName,eventLocationName:this.state.flyoutEventLocationName,eventLocationAddress:this.state.flyoutEventLocationAddress,eventMembers:this.state.eventMembers,numOfGoingMembers:this.state.numOfGoingMembers,numOfInterestedMembers:this.state.numOfInterestedMembers,selfGuestState:this.state.selfGuestState,onDateTimeChange:this.$1,onNameChange:this.$2,onLocationChange:this.$3,onLocationSelect:this.$4,onSelfGuestStateChange:this.$5,onDeleteEvent:this.$6,onCreateOrChangeEvent:this.$7,dialogProps:this.props.dialogProps,threadID:this.props.threadID}):b("React").createElement("span",null,b("React").createElement(b("ChatEventReminderTabSheet.react"),babelHelpers["extends"]({},this.props,{flyoutEventDate:this.state.flyoutEventDate,flyoutEventName:this.state.flyoutEventName,flyoutEventLocationName:this.state.flyoutEventLocationName,flyoutEventLocationAddress:this.state.flyoutEventLocationAddress,eventDate:this.state.eventDate,eventName:this.state.eventName,eventLocationName:this.state.eventLocationName,eventMembers:this.state.eventMembers,allowRSVP:this.state.allowRSVP,numOfGoingMembers:this.state.numOfGoingMembers,numOfInterestedMembers:this.state.numOfInterestedMembers,selfGuestState:this.state.selfGuestState,eventID:this.state.eventID,eventType:this.state.eventType,flyoutShown:this.state.flyoutShown,handleClick:this.$8,onToggle:this.$9,onDateTimeChange:this.$1,onNameChange:this.$2,onLocationChange:this.$3,onLocationSelect:this.$4,onSelfGuestStateChange:this.$5,onDeleteEvent:this.$6,onCreateOrChangeEvent:this.$7,isEventLoaded:this.state.isEventLoaded,tabIndex:0,threadID:this.props.threadID})))};a.prototype.$11=function(){var a=b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);a=b("XCreateEventReminderController").getURIBuilder().setString("acontext",b("FBJSON").stringify(this.props.actionContext)).setEnum("event_type",b("LightweightEventType").EVENT).setInt("event_time",Math.floor(this.state.flyoutEventDate/k)).setInt("thread_id",a).setString("title",this.state.flyoutEventName).setString("location_id",this.state.flyoutEventLocationID).setString("location_name",this.state.flyoutEventLocationName);new(b("AsyncRequest"))(a.getURI()).setHandler(function(a){a.payload&&(this.props.dialogProps&&this.props.dialogProps.onToggle&&(this.props.dialogProps.onToggle(!1),this.props.onSuccess&&this.props.onSuccess()),a.payload.error&&b("SimpleXUIDialog").show(a.payload.error))}.bind(this)).send()};a.prototype.$10=function(){var a=b("XEditEventReminderController").getURIBuilder().setInt("event_reminder_id",this.state.eventID).setString("title",this.state.flyoutEventName).setInt("date",this.state.flyoutEventDate/k).setString("location_id",this.state.flyoutEventLocationID).setString("location_name",this.state.flyoutEventLocationName).setBool("delete",!1).setString("acontext",b("FBJSON").stringify(this.props.actionContext));new(b("AsyncRequest"))(a.getURI()).setHandler(function(a){a.payload&&(this.props.dialogProps&&this.props.dialogProps.onToggle&&(this.props.dialogProps.onToggle(!1),this.props.onSuccess&&this.props.onSuccess()),b("EventReminderActions").updateEventReminder(this.props.threadID,a.payload))}.bind(this)).send()};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("FantaEventReminderTabSheet.react",["ChatEventReminderContainer.react","EventsActionsLogger","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){var a={action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.REMINDER_BANNER}]};return b("React").createElement(b("ChatEventReminderContainer.react"),{threadID:this.props.threadID,flyoutNoSheet:!1,isEditing:!0,useContextualDialog:!0,actionContext:a})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ChatEventPlanTriggers.react",["cx","ChatEventReminderContainer.react","EventsActionsLogger","EventReminderActionsLogger","EventReminderRequestHelper","EventReminderStateStore","Link.react","React","ReactDOM"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=266;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={isEditing:!1,showFlyout:!1},this.$1=function(){b("EventReminderActionsLogger").logClickOnTriggerWord();var a=b("EventReminderStateStore").getEvent(this.props.threadID);a&&a.exists?(this.setState({isEditing:!0}),!this.state.showFlyout?b("EventReminderRequestHelper").fetchEventReminder(this.props.threadID,a.eventID,function(){this.setState({showFlyout:!0})}.bind(this)):this.setState({showFlyout:!1})):this.setState({isEditing:!1,showFlyout:!this.state.showFlyout})}.bind(this),this.onToggle=function(a){this.setState({showFlyout:a})}.bind(this),c}a.prototype.componentDidMount=function(){b("EventReminderActionsLogger").logViewOnTriggerWord()};a.prototype.render=function(){return b("React").createElement(b("Link.react"),{className:"_fcj",onClick:this.$1,ref:"trigger_word"},this.props.text,this.$2())};a.prototype.$2=function(){if(!this.state.showFlyout)return null;var a="left",c=b("ReactDOM").findDOMNode(this.refs.trigger_word);c&&c instanceof Element&&c.getBoundingClientRect().left<i&&(a="right");c={alignment:"left",position:a,contextRef:function(){return this}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle};a={action_history:[{surface:b("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:b("EventsActionsLogger").Mechanism.TRIGGER_WORD}]};return b("React").createElement(b("ChatEventReminderContainer.react"),{actionContext:a,defaultEventDate:this.props.data.value,dialogProps:c,flyoutNoSheet:!0,isEditing:this.state.isEditing,threadID:this.props.threadID,useContextualDialog:!0})};a.propTypes={text:c.string.isRequired,threadID:c.string.isRequired,data:c.shape({name:c.string.isRequired,value:c.number.isRequired}).isRequired};e.exports=a}),null);